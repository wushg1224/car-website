<div>
    <div id="car">
        <img src="img/car.jpg" alt="car">
        brand: <h2>BMW</h2>
        model: <h3>X5</h3>
        type: <h3>SUV</h3>
        price: <p>$<span id="price">100</span>/day</p>

    </div>
    <div id="total-price">

    </div>

    <div id="reservation">
        <form action="reservation.php" method="post">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

            </div>
            <div>
                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" required>

            </div>
            <div>
                <label for="start">Start Date:</label>
                <input type="date" id="start" name="start" required>

            </div>
            <div>
                <label for="end">End Date:</label>
                <input type="date" id="end" name="end" required>

            </div>
            <div>
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" min="1" max="3" required>
            </div>
            <div>
                <label for="license">Driver License:</label>
                <input type="checkbox" name="license" value="have" />
            </div>
            <button id="cancel">Cancel this reservation</button>
            <button type="submit">Proceed to place order</button>
            <button id="leave">Leave</button>
        </form>
    </div>
    <script>
        // load all fields from cookie
        var cookies = document.cookie.split(";");
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].split("=");
            if (cookie[0].trim() == "name") {
                document.getElementById("name").value = cookie[1];
            } else if (cookie[0].trim() == "email") {
                document.getElementById("email").value = cookie[1];
            } else if (cookie[0].trim() == "phone") {
                document.getElementById("phone").value = cookie[1];
            } else if (cookie[0].trim() == "start") {
                document.getElementById("start").value = cookie[1];
            } else if (cookie[0].trim() == "end") {
                document.getElementById("end").value = cookie[1];
            } else if (cookie[0].trim() == "quantity") {
                document.getElementById("quantity").value = cookie[1];
            }
        }

        document.getElementById("cancel").addEventListener("click", function () {
            // back to last page
            window.history.back();
        });
        document.getElementById("leave").addEventListener("click", function () {
            // save all fields to cookie
            document.cookie = "name=" + document.getElementById("name").value;
            document.cookie = "email=" + document.getElementById("email").value;
            document.cookie = "phone=" + document.getElementById("phone").value;
            document.cookie = "start=" + document.getElementById("start").value;
            document.cookie = "end=" + document.getElementById("end").value;
            document.cookie = "quantity=" + document.getElementById("quantity").value;

            window.history.back();
        });

        // when quantity is changed, update price
        document.getElementById("quantity").addEventListener("change", function () {
            calculateTotalPrice();
        });
        // when start date changed, update price
        document.getElementById("start").addEventListener("change", function () {
            calculateTotalPrice();
        });
        // when end date changed, update price   
        document.getElementById("end").addEventListener("change", function () {
            calculateTotalPrice();
        });

        // price = quantity * price per day * number of days
        function calculateTotalPrice() {
            var quantity = parseInt(document.getElementById("quantity").value);
            var price = parseInt(document.getElementById("price").innerText);
            // calculate number of days
            var start = new Date(document.getElementById("start").value);
            var end = new Date(document.getElementById("end").value);
            var days = (end - start) / (1000 * 60 * 60 * 24);
            // calculate total price
            var total = quantity * price * days;
            if (isNaN(total)) {
                document.getElementById("total-price").innerText = "";
            } else {
                document.getElementById("total-price").innerText = "Total Price: $" + total;
            }
        }
    </script>
</div>